<!doctype html>

<html>

<head>
  <meta name="build" content="20150127165821/4455388d45dccff62dc6ab49e90bf6e20167ada1" />
  <meta charset="utf-8" />
  <title>Basis Test Runner</title>

  <link rel="stylesheet" type="text/css" media="all" href="style.css?o6xJ676cKlo5-4DZwhEgVQ" />

  <script type="text/javascript">
    var startTime = new Date;
  </script>
  <script type="text/javascript" src="script.js?wy4T9KfRThpka4U1bJDrdA"></script>
  
</head>

<body>
  <script type="text/javascript">
    (function() {
      var app = basis.require("./0.js");
      var params = location.search.replace(/^\?/, "").split("&").reduce(function(res, pair) {
        var parts = pair.split("=");
        res[parts.shift()] = parts.join("=");
        return res;
      }, {});
      if (!params.page) {
        document.write("Test suite is not specified. Add to page url `?page=path/to/test-suite.html`");
      } else {
        var iframe = document.createElement("iframe");
        iframe.src = params.page;
        iframe.className = "hide-frame";
        iframe.onload = function() {
          if (typeof this.contentWindow.loadTests == "function") {
            var benchmark = basis.require("./h.js");
            var t = benchmark.time();
            this.contentWindow.loadTests(function(data, feedback) {
              app.loadTests(data, params.autorun, feedback);
            });
            basis.dev.info("Timing:\n" + "app ready: " + (new Date - startTime) + "\n" + "test load: " + benchmark.time(t));
          }
        };
        basis.doc.body.add(iframe);
        app.setup({
          element: document.body,
          baseURI: basis.path.baseURI
        });
      }
    })();
  </script>
</body>
</html>
